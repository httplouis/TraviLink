/* Admin-only theme */
@import "tailwindcss";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Root ===== */
[data-role="admin"] {
  --admin-brand: #7a0019;
  --admin-line: #e5e7eb;
}

/* ===== Topbar ===== */
[data-role="admin"] .tl-topbar {
  background: var(--admin-brand);
  color: #fff;
  border-bottom: 1px solid rgba(0,0,0,.15);
  box-shadow: inset 0 -1px 0 rgba(255,255,255,.12);
}

/* ===== Shell (flex; main re-centers automatically) ===== */
[data-role="admin"] .tl-shell {
  display: flex;
  height: calc(100dvh - 56px);
  overflow: hidden;             /* only main scrolls */
}

/* Left nav area (visual border only; width is set by component) */
[data-role="admin"] .tl-leftnav {
  background: #fff;
  border-right: 1px solid var(--admin-line);
  min-width: 0;
  overflow-y: auto;
}

/* Main: the ONLY scroller */
[data-role="admin"] .tl-main {
  min-width: 0;
  background: #f6f6f6;
  overflow-y: auto;
  overflow-x: hidden;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;

  /* --- Keep width stable when scrollbar appears/disappears --- */
  scrollbar-gutter: stable both-edges;
}

/* Fallback for browsers without scrollbar-gutter */
@supports not (scrollbar-gutter: stable) {
  [data-role="admin"] .tl-main {
    overflow-y: scroll; /* always reserve gutter */
  }
}

/* ===== Optional helpers ===== */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { scrollbar-width: none; }

/* ===== Nav items (legacy helpers if you re-use) ===== */
[data-role="admin"] .nav-item {
  display: flex; align-items: center; gap: .6rem;
  padding: .5rem .75rem; border-radius: .5rem;
  font-size: .9rem; color: #374151;
}
[data-role="admin"] .nav-item-active {
  background: var(--admin-brand); color: #fff;
}

/* ===== KPI tiles / Cards (optional) ===== */
[data-role="admin"] .kpi-tile {
  border: 1px solid var(--admin-line);
  border-radius: .75rem;
  background: #fff;
}
[data-role="admin"] .tl-card {
  border: 1px solid var(--admin-line);
  border-radius: .75rem;
  background: #fff;
  box-shadow: 0 6px 18px rgba(17,24,39,.06);
}

/* ===== Print tweaks ===== */
@media print {
  [data-role="admin"] .tl-leftnav,
  [data-role="admin"] .tl-topbar { display: none !important; }
  [data-role="admin"] .tl-shell { height: auto !important; }
  [data-role="admin"] .tl-main { overflow: visible !important; background: #fff !important; }
  table { page-break-inside: auto; }
  tr, td, th { page-break-inside: avoid; page-break-after: auto; }
}

/* --- Sticky stack for Requests page --- */
[data-role="admin"] {
  /* tweak these if you change heights */
  --admin-kpi-h: 104px;        /* KPI + view toggle block height */
  --admin-toolbar-h: 56px;     /* RequestsToolbar visual height */
}

/* KPI + view toggle stays under the topbar while scrolling */
[data-role="admin"] .admin-sticky-kpi {
  position: sticky;
  top: 0;
  z-index: 30;
  background: #f6f6f6;
  /* subtle glass look so it blends over content */
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
}

/* Toolbar (search/filter/sort) stays below the KPI stack */
[data-role="admin"] .admin-sticky-toolbar {
  position: sticky;
  top: var(--admin-kpi-h);
  z-index: 25;
  background: #fff;
  border-bottom: 1px solid var(--admin-line);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
}

/* Table header sticks BELOW toolbar (so they don't overlap) */
[data-role="admin"] .admin-thead-sticky {
  top: calc(var(--admin-kpi-h) + var(--admin-toolbar-h));
  z-index: 20;
}
